{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}
{{ block.super }}
<style>
    /* Custom Dashboard Styling */
    .dashboard-welcome {
        background: linear-gradient(135deg, #8B3A8B 0%, #6B2A6B 100%);
        color: white;
        padding: 30px;
        border-radius: 16px;
        margin-bottom: 30px;
        box-shadow: 0 8px 24px rgba(139, 58, 139, 0.3);
    }

    .dashboard-welcome h1 {
        font-size: 32px;
        margin: 0 0 10px 0;
        font-weight: 700;
    }

    .dashboard-welcome p {
        font-size: 16px;
        margin: 0;
        opacity: 0.95;
    }

    .dashboard-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        border-left: 4px solid #8B3A8B;
        transition: all 0.3s ease;
    }

    .stat-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 20px rgba(139, 58, 139, 0.2);
    }

    .stat-card h3 {
        color: #7F8C8D;
        font-size: 14px;
        margin: 0 0 10px 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 600;
    }

    .stat-card .stat-value {
        color: #8B3A8B;
        font-size: 36px;
        font-weight: 700;
        margin: 0;
    }

    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 25px;
    }

    #content-main > h1 {
        display: none;
    }

    .app-list {
        margin: 0;
    }

    @media (max-width: 768px) {
        .dashboard-stats {
            grid-template-columns: 1fr;
        }

        .dashboard-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-welcome">
    <h1>{% trans 'Welcome to Nora Dental Clinic Administration' %}</h1>
    <p>{% trans 'Manage your clinic operations, patients, appointments, and staff efficiently.' %}</p>
</div>

<div class="dashboard-stats">
    <div class="stat-card">
        <h3>{% trans 'Total Patients' %}</h3>
        <p class="stat-value">{{ total_patients|default:"0" }}</p>
    </div>
    <div class="stat-card">
        <h3>{% trans 'Doctors' %}</h3>
        <p class="stat-value">{{ total_doctors|default:"0" }}</p>
    </div>
    <div class="stat-card">
        <h3>{% trans 'Today\'s Appointments' %}</h3>
        <p class="stat-value">{{ today_appointments|default:"0" }}</p>
    </div>
    <div class="stat-card">
        <h3>{% trans 'Active Staff' %}</h3>
        <p class="stat-value">{{ total_staff|default:"0" }}</p>
    </div>
</div>

<div class="dashboard-grid">
    {% if app_list %}
        {% for app in app_list %}
            <div class="module">
                <table>
                    <caption>
                        <a href="{{ app.app_url }}" class="section" title="{% blocktrans with name=app.name %}Models in the {{ name }} application{% endblocktrans %}">
                            {{ app.name }}
                        </a>
                    </caption>
                    {% for model in app.models %}
                        <tr class="model-{{ model.object_name|lower }}">
                            {% if model.admin_url %}
                                <th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>
                            {% else %}
                                <th scope="row">{{ model.name }}</th>
                            {% endif %}

                            {% if model.add_url %}
                                <td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>
                            {% else %}
                                <td>&nbsp;</td>
                            {% endif %}

                            {% if model.admin_url %}
                                {% if model.view_only %}
                                <td><a href="{{ model.admin_url }}" class="viewlink">{% trans 'View' %}</a></td>
                                {% else %}
                                <td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>
                                {% endif %}
                            {% else %}
                                <td>&nbsp;</td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                </table>
            </div>
        {% endfor %}
    {% else %}
        <p>{% trans "You don't have permission to view or edit anything." %}</p>
    {% endif %}
</div>

<div class="module" style="margin-top: 30px;">
    <h2>{% trans 'Quick Actions' %}</h2>
    <div style="padding: 20px;">
        <p>
            <a href="/admin/clinic/patient/add/" class="button" style="margin-right: 10px;">{% trans 'Register New Patient' %}</a>
            <a href="/admin/clinic/appointment/add/" class="button" style="margin-right: 10px;">{% trans 'Schedule Appointment' %}</a>
            <a href="/admin/clinic/visit/add/" class="button">{% trans 'Create Visit' %}</a>
        </p>
    </div>
</div>
{% endblock %}
